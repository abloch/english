<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hello Bulma!</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.0/css/bulma.min.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/alpinejs" defer></script>
  </head>
  <body>
    <div x-data = '{
      debug: false,
      isLoading: true,
      vocab: null,
      toDisplay: [],
      question: {},
      init: async function() {
        let resp = await axios.get("/vocab1.json");
        this.vocab = resp.data;
        this.isLoading = false;
        this.toDisplay = this.randomNum(this.vocab, 4);
        this.question = this.randomNum(this.toDisplay, 1)[0];
      },
      randomNum: function(arr, num) {
        if (!arr) {
          return [];
        }
        const shuffled = arr.sort(() => 0.5 - Math.random());
        let ret = shuffled.slice(0, num);
        return ret;
      },
      checkAnswer: function(card) {
        const correct = card.hebrew === this.question.hebrew;
        console.log(correct);
      }
    }'>

      <div x-show="isLoading">טוען...</div>
      <div x-show="isLoading==false">
      <div class="notification is-primary title has-text-centered" x-text='question.english'></div>
      <div class="fixed-grid has-2-cols">
        <div class="grid">          
          <template x-for="card in toDisplay">
              <div class="cell button" x-text="card.hebrew" @click="checkAnswer(card)"></div>
            </template>
        </div>
      </div>

    </div>
  </body>
</html>